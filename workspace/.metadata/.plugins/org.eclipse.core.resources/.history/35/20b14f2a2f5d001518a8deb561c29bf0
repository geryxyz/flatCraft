package flatcraft;

import java.awt.Point;

import flatcraft.blocks.*;
import flatcraft.gui.ImageGrid;

public abstract class World {
	
	private static final ImageGrid IMAGE_GRID = Game.mainWindow.getImageGrid();
	
	private int rows;
	private int columns;
	private Block[][] blocks;
	protected Point spawnPosition;
	
	public World(int rows, int columns) {
		this.rows = rows;
		this.columns = columns;
		this.blocks = new Block[columns][rows];
		this.spawnPosition = new Point(0, 0);
	}

	public void placeBlock(int x, int y, Block block) {
		IMAGE_GRID.setImage(x, rows - 1 - y, block.getImage());
		blocks[x][y] = block;
	}
	
	public void breakBlock(int x, int y) {
		placeBlock(x, y, new AirBlock());
	}
	
	public Block getBlock(int x, int y) {
		return blocks[x][y];
	}
	
	public void addPlayer(Player player) {
		placeBlock(spawnPosition.x, spawnPosition.y, player);
		player.setWorld(this);
		Game.mainWindow.addKeyListener(player);
	}
	
	protected void afterGameStart() {}

	public Point getSpawnPosition() {
		return spawnPosition;
	}

	public int getRows() {
		return rows;
	}

	public int getColumns() {
		return columns;
	}
	
}
